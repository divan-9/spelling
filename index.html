
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Flashcard App</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: #f4f4f4; }
        #app { text-align: center; }

        .card {
          height: 250px;
          perspective: 1000px;
        }

        .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.8s; transform-style: preserve-3d; }
        .card.flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border: 1px solid #ccc; border-radius: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .card-front { background-color: white; }
        .card-back { background-color: #f9f9f9; transform: rotateY(180deg); }
        #controls, #navigation { margin-top: 20px; }
        button { margin: 5px; padding: 10px 20px; cursor: pointer; }
        input { padding: 10px; margin-top: 10px; }
        .diff { margin-top: 10px; }
        .diff span { padding: 2px 5px; border-radius: 3px; }
        .diff .correct { background-color: #d4edda; }
        .diff .incorrect { background-color: #f8d7da; }
    </style>
</head>
<body>

<div id="app">
    <div id="menu">
        <button id="week1">Week 1</button>
        <button id="week2">Week 2</button>
        <button id="week3">Week 3</button>
        <button id="week4">Week 4</button>
        <button id="week5">Week 5</button>
        <button id="week6">Week 6</button>
    </div>
    <div id="flashcard" class="card">
        <div class="card-inner">
            <div class="card-front">
                <div id="definition"></div>
                <button id="pronounce">Play Pronunciation</button>
                <input type="text" id="guess" placeholder="Your guess...">
                <button id="submit">Submit</button>
            </div>
            <div class="card-back">
                <div>answer: <span id="answer" class=""></span></div>
                <div>word: <b id="word" class=""></b></div>
                <div id="diff" class="diff"></div>
                <br>
                <div id="translation"></div>
                <br>
                <div id="sample"></div>
                <br>
                <div id="stats"></div>
            </div>
        </div>
    </div>
    <div id="navigation">
        <button id="prev">Previous</button>
        <button id="flip">Flip</button>
        <button id="next">Next</button>
    </div>
    <div id="congrats" style="display: none;">
        <h1>Congratulations!</h1>
        <p>You have learned all the words for this week.</p>
    </div>
</div>

<script>
    const words = {
        week1: [
            { word: "community", definition: "A group of people living in the same place or sharing common interests.", translation: ["сообщество","община","общество"], pronunciation: "community", sample: "The local community organized a clean-up day.", correctCount: 0, attempts: 0 },
            { word: "curiosity", definition: "A strong desire to know or learn something.", translation: ["любопытство","интерес"], pronunciation: "curiosity", sample: "Her curiosity led her to read the entire report.", correctCount: 0, attempts: 0 },
            { word: "ability", definition: "The power or skill to do something.", translation: ["способность","умение"], pronunciation: "ability", sample: "He has the ability to solve complex problems.", correctCount: 0, attempts: 0 },
            { word: "visibility", definition: "The state of being able to see or be seen.", translation: ["видимость","заметность"], pronunciation: "visibility", sample: "Fog reduced visibility on the road.", correctCount: 0, attempts: 0 },
            { word: "captivity", definition: "The state of being imprisoned or confined.", translation: ["плен","неволя"], pronunciation: "captivity", sample: "The animals were released from captivity.", correctCount: 0, attempts: 0 },
            { word: "activity", definition: "Something that is done for enjoyment or a particular purpose.", translation: ["деятельность","активность","занятие"], pronunciation: "activity", sample: "Outdoor activity is good for your health.", correctCount: 0, attempts: 0 },
            { word: "eternity", definition: "Infinite or endless time.", translation: ["вечность"], pronunciation: "eternity", sample: "Their love seemed to last for eternity.", correctCount: 0, attempts: 0 },
            { word: "flexibility", definition: "The ability to bend or adapt easily.", translation: ["гибкость","податливость"], pronunciation: "flexibility", sample: "Flexibility is important in negotiation.", correctCount: 0, attempts: 0 },
            { word: "possibility", definition: "A thing that may happen or be the case.", translation: ["возможность","вариант"], pronunciation: "possibility", sample: "There is a possibility of rain tomorrow.", correctCount: 0, attempts: 0 },
            { word: "sensitivity", definition: "The quality of being easily affected or responsive.", translation: ["чувствительность","внимательность"], pronunciation: "sensitivity", sample: "Skin sensitivity increases in winter.", correctCount: 0, attempts: 0 }
        ],
        week2: [
            { word: "happiness", definition: "The state of being happy.", translation: ["счастье"], pronunciation: "happiness", sample: "They shared moments of happiness together.", correctCount: 0, attempts: 0 },
            { word: "hardness", definition: "The quality of being hard.", translation: ["твёрдость","жёсткость"], pronunciation: "hardness", sample: "The hardness of the metal makes it durable.", correctCount: 0, attempts: 0 },
            { word: "madness", definition: "Severe mental illness or extremely foolish behavior.", translation: ["безумие","сумасшествие"], pronunciation: "madness", sample: "In a moment of madness, he quit his job.", correctCount: 0, attempts: 0 },
            { word: "nastiness", definition: "The state or quality of being unpleasant or offensive.", translation: ["мерзость","гадость","злобность"], pronunciation: "nastiness", sample: "The nastiness of the comments surprised everyone.", correctCount: 0, attempts: 0 },
            { word: "silliness", definition: "Lack of seriousness; foolishness.", translation: ["глупость","несерьёзность"], pronunciation: "silliness", sample: "Stop the silliness and focus on your work.", correctCount: 0, attempts: 0 },
            { word: "tidiness", definition: "The state of being neat and orderly.", translation: ["опрятность","аккуратность"], pronunciation: "tidiness", sample: "Her tidiness keeps the office organized.", correctCount: 0, attempts: 0 },
            { word: "childishness", definition: "Behavior typical of a child; immature behavior.", translation: ["детскость","ребячество","инфантильность"], pronunciation: "childishness", sample: "His childishness annoyed his colleagues.", correctCount: 0, attempts: 0 },
            { word: "willingness", definition: "The quality of being ready or eager to do something.", translation: ["готовность","желание"], pronunciation: "willingness", sample: "Her willingness to help made a difference.", correctCount: 0, attempts: 0 },
            { word: "carelessness", definition: "Failure to take care; negligence.", translation: ["небрежность","невнимательность"], pronunciation: "carelessness", sample: "Carelessness can lead to accidents.", correctCount: 0, attempts: 0 },
            { word: "foolishness", definition: "Lack of good sense or judgment.", translation: ["глупость","безрассудство"], pronunciation: "foolishness", sample: "He regretted his foolishness later.", correctCount: 0, attempts: 0 }
        ],
        week3: [
            { word: "membership", definition: "The state of being a member of a group.", translation: ["членство"], pronunciation: "membership", sample: "Membership gives you access to exclusive content.", correctCount: 0, attempts: 0 },
            { word: "ownership", definition: "The state or right of possessing something.", translation: ["собственность","владение"], pronunciation: "ownership", sample: "Ownership of the house transferred last year.", correctCount: 0, attempts: 0 },
            { word: "partnership", definition: "An association of two or more people working together.", translation: ["партнёрство","сотрудничество"], pronunciation: "partnership", sample: "Their partnership boosted sales.", correctCount: 0, attempts: 0 },
            { word: "dictatorship", definition: "Government by a dictator; absolute rule.", translation: ["диктатура"], pronunciation: "dictatorship", sample: "The dictatorship suppressed free speech.", correctCount: 0, attempts: 0 },
            { word: "championship", definition: "A contest to decide a champion.", translation: ["чемпионат","первенство"], pronunciation: "championship", sample: "They won the national championship.", correctCount: 0, attempts: 0 },
            { word: "craftsmanship", definition: "Skill in making things by hand.", translation: ["мастерство","ремесло"], pronunciation: "craftsmanship", sample: "The table shows excellent craftsmanship.", correctCount: 0, attempts: 0 },
            { word: "fellowship", definition: "Friendly association; companionship.", translation: ["товарищество","дружба","сообщество"], pronunciation: "fellowship", sample: "Fellowship grew among the volunteers.", correctCount: 0, attempts: 0 },
            { word: "apprenticeship", definition: "A period of training under a skilled employer.", translation: ["ученичество","стажировка"], pronunciation: "apprenticeship", sample: "He completed a two-year apprenticeship.", correctCount: 0, attempts: 0 },
            { word: "citizenship", definition: "The status of being a citizen.", translation: ["гражданство"], pronunciation: "citizenship", sample: "She applied for citizenship.", correctCount: 0, attempts: 0 },
            { word: "sponsorship", definition: "Financial or other support for an activity.", translation: ["спонсорство","патронаж"], pronunciation: "sponsorship", sample: "The event relied on corporate sponsorship.", correctCount: 0, attempts: 0 }
        ],
        week4: [
            { word: "stationary", definition: "Not moving or not intended to be moved.", translation: ["неподвижный","стационарный"], pronunciation: "stationary", sample: "The car was stationary at the red light.", correctCount: 0, attempts: 0 },
            { word: "stationery", definition: "Writing and office materials.", translation: ["канцелярские принадлежности"], pronunciation: "stationery", sample: "She bought stationery for school.", correctCount: 0, attempts: 0 },
            { word: "steal", definition: "To take something without permission.", translation: ["красть","украсть"], pronunciation: "steal", sample: "He tried to steal a bike.", correctCount: 0, attempts: 0 },
            { word: "steel", definition: "A strong hard metal made of iron and carbon.", translation: ["сталь"], pronunciation: "steel", sample: "The bridge is made of steel.", correctCount: 0, attempts: 0 },
            { word: "wary", definition: "Cautious and watchful.", translation: ["настороженный","осторожный"], pronunciation: "wary", sample: "Be wary of online scams.", correctCount: 0, attempts: 0 },
            { word: "weary", definition: "Very tired; fatigued.", translation: ["утомлённый","усталый"], pronunciation: "weary", sample: "After the long hike, they were weary.", correctCount: 0, attempts: 0 },
            { word: "who's", definition: "Contraction of 'who is' or 'who has'.", translation: ["кто есть","у кого (has)"], pronunciation: "who's", sample: "Who's coming to the meeting?", correctCount: 0, attempts: 0 },
            { word: "whose", definition: "Belonging to which person.", translation: ["чей"], pronunciation: "whose", sample: "Whose book is this?", correctCount: 0, attempts: 0 },
            { word: "fate", definition: "The development of events beyond a person's control; destiny.", translation: ["судьба","рок"], pronunciation: "fate", sample: "He accepted his fate.", correctCount: 0, attempts: 0 },
            { word: "fete", definition: "A festival or celebration, often outdoors.", translation: ["праздник","ярмарка"], pronunciation: "fete", sample: "The village held a summer fete.", correctCount: 0, attempts: 0 }
        ],
        week5: [
            { word: "alter", definition: "To change or modify.", translation: ["изменять","корректировать"], pronunciation: "alter", sample: "We need to alter the plan.", correctCount: 0, attempts: 0 },
            { word: "altar", definition: "A table used in religious rituals.", translation: ["алтарь","жертвенник"], pronunciation: "altar", sample: "Flowers were placed on the altar.", correctCount: 0, attempts: 0 },
            { word: "ascent", definition: "A climb or upward movement.", translation: ["подъём","восхождение"], pronunciation: "ascent", sample: "The ascent took three hours.", correctCount: 0, attempts: 0 },
            { word: "assent", definition: "Agreement or approval.", translation: ["согласие","одобрение"], pronunciation: "assent", sample: "The board gave its assent.", correctCount: 0, attempts: 0 },
            { word: "bridal", definition: "Relating to a bride or wedding.", translation: ["свадебный"], pronunciation: "bridal", sample: "She wore a beautiful bridal gown.", correctCount: 0, attempts: 0 },
            { word: "bridle", definition: "A headgear for a horse used for control.", translation: ["уздечка"], pronunciation: "bridle", sample: "He tightened the bridle.", correctCount: 0, attempts: 0 },
            { word: "cereal", definition: "A grain used for food; breakfast flakes.", translation: ["зерновая культура","хлопья"], pronunciation: "cereal", sample: "She had cereal for breakfast.", correctCount: 0, attempts: 0 },
            { word: "serial", definition: "Consisting of a series; a TV show released in parts.", translation: ["серийный","сериал"], pronunciation: "serial", sample: "It's a popular crime serial.", correctCount: 0, attempts: 0 },
            { word: "compliment", definition: "A polite expression of praise.", translation: ["комплимент"], pronunciation: "compliment", sample: "He paid her a sincere compliment.", correctCount: 0, attempts: 0 },
            { word: "complement", definition: "Something that completes or goes well with something.", translation: ["дополнение","комплектующее"], pronunciation: "complement", sample: "The scarf is a perfect complement to the coat.", correctCount: 0, attempts: 0 }
        ],
        week6: [
            { word: "principal", definition: "Most important; the person in charge of a school.", translation: ["основной","главный","директор школы"], pronunciation: "principal", sample: "The principal addressed the students.", correctCount: 0, attempts: 0 },
            { word: "principle", definition: "A fundamental truth or rule.", translation: ["принцип","основоположение"], pronunciation: "principle", sample: "Honesty is a guiding principle.", correctCount: 0, attempts: 0 },
            { word: "profit", definition: "Financial gain.", translation: ["прибыль","доход"], pronunciation: "profit", sample: "The company reported higher profit.", correctCount: 0, attempts: 0 },
            { word: "prophet", definition: "A person who proclaims divine messages.", translation: ["пророк"], pronunciation: "prophet", sample: "The prophet warned of future trials.", correctCount: 0, attempts: 0 },
            { word: "descent", definition: "An act of moving down or a person's lineage.", translation: ["спуск","происхождение"], pronunciation: "descent", sample: "The descent was steep.", correctCount: 0, attempts: 0 },
            { word: "dissent", definition: "Disagreement with official ideas.", translation: ["несогласие","инакомыслие"], pronunciation: "dissent", sample: "She voiced her dissent.", correctCount: 0, attempts: 0 },
            { word: "desert", definition: "A dry, barren area of land.", translation: ["пустыня"], pronunciation: "desert", sample: "Camels survive in the desert.", correctCount: 0, attempts: 0 },
            { word: "dessert", definition: "A sweet course after a meal.", translation: ["десерт"], pronunciation: "dessert", sample: "We shared a chocolate dessert.", correctCount: 0, attempts: 0 },
            { word: "draft", definition: "A preliminary version of a written work; also a current of air.", translation: ["черновик","сквозняк"], pronunciation: "draft", sample: "Send me the first draft.", correctCount: 0, attempts: 0 },
            { word: "draught", definition: "A current of cool air; beer served from a cask/tap (BrE).", translation: ["сквозняк","разливное пиво"], pronunciation: "draught", sample: "Close the window; there's a draught.", correctCount: 0, attempts: 0 }
        ]
    };

    let currentWeek = 'week1';
    let unlearnedWords = [];
    let currentCardIndex = 0;
    let synth = window.speechSynthesis;

    const definitionEl = document.getElementById('definition');
    const translationEl = document.getElementById('translation');
    const sampleEl = document.getElementById('sample');
    const diffEl = document.getElementById('diff');
    const guessInput = document.getElementById('guess');
    const cardEl = document.getElementById('flashcard');
    const congratsEl = document.getElementById('congrats');
    const navigationEl = document.getElementById('navigation');
    const statsEl = document.getElementById('stats');
    const answerEl = document.getElementById('answer');
    const wordEl = document.getElementById('word');

    function getUnlearnedWords() {
        return words[currentWeek].filter(word => word.correctCount < 3);
    }

    function loadCard() {
        unlearnedWords = getUnlearnedWords();
        if (unlearnedWords.length === 0) {
            cardEl.style.display = 'none';
            navigationEl.style.display = 'none';
            congratsEl.style.display = 'block';
            return;
        }
        cardEl.style.display = 'block';
        navigationEl.style.display = 'block';
        congratsEl.style.display = 'none';

        const word = unlearnedWords[currentCardIndex];
        definitionEl.textContent = word.definition;
        translationEl.innerText = word.translation.join(', ');
        sampleEl.textContent = word.sample;
        statsEl.textContent = `${word.correctCount} / ${word.attempts}`;
        diffEl.innerHTML = '';
        guessInput.value = '';
        cardEl.classList.remove('flipped');
        speak(word.pronunciation);
        guessInput.focus();
    }

    function speak(text) {
        if (synth.speaking) {
            console.error('speechSynthesis.speaking');
            return;
        }
        if (text !== '') {
            const utterThis = new SpeechSynthesisUtterance(text);
            utterThis.onend = function (event) {
                console.log('SpeechSynthesisUtterance.onend');
            }
            utterThis.onerror = function (event) {
                console.error('SpeechSynthesisUtterance.onerror');
            }
            synth.speak(utterThis);
        }
    }

    function showDiff(guess, correct) {
        let result = '';
        let isCorrect = true;
        for (let i = 0; i < correct.length; i++) {
            if (i < guess.length && guess[i].toLowerCase() === correct[i].toLowerCase()) {
                result += `<span class="correct">${correct[i]}</span>`;
            } else {
                result += `<span class="incorrect">${correct[i]}</span>`;
                isCorrect = false;
            }
        }
        if (guess.length > correct.length) {
            result += `<span class="incorrect">${guess.substring(correct.length)}</span>`;
            isCorrect = false;
        }
        if (guess.length < correct.length) {
            isCorrect = false;
        }
        diffEl.innerHTML = result;
        return isCorrect;
    }

    document.getElementById('week1').addEventListener('click', () => {
        currentWeek = 'week1';
        words.week1.forEach(word => { word.correctCount = 0; word.attempts = 0; });
        currentCardIndex = 0;
        loadCard();
    });

    document.getElementById('week2').addEventListener('click', () => {
        currentWeek = 'week2';
        words.week2.forEach(word => { word.correctCount = 0; word.attempts = 0; });
        currentCardIndex = 0;
        loadCard();
    });

    document.getElementById('week3').addEventListener('click', () => {
        currentWeek = 'week3';
        words.week3.forEach(word => { word.correctCount = 0; word.attempts = 0; });
        currentCardIndex = 0;
        loadCard();
    });

    document.getElementById('week4').addEventListener('click', () => {
        currentWeek = 'week4';
        words.week4.forEach(word => { word.correctCount = 0; word.attempts = 0; });
        currentCardIndex = 0;
        loadCard();
    });

    document.getElementById('week5').addEventListener('click', () => {
        currentWeek = 'week5';
        words.week5.forEach(word => { word.correctCount = 0; word.attempts = 0; });
        currentCardIndex = 0;
        loadCard();
    });

    document.getElementById('week6').addEventListener('click', () => {
        currentWeek = 'week6';
        words.week6.forEach(word => { word.correctCount = 0; word.attempts = 0; });
        currentCardIndex = 0;
        loadCard();
    });

    document.getElementById('pronounce').addEventListener('click', () => {
        speak(unlearnedWords[currentCardIndex].pronunciation);
    });

    document.getElementById('submit').addEventListener('click', () => {
        const guess = guessInput.value;
        const correct = unlearnedWords[currentCardIndex].word;
        unlearnedWords[currentCardIndex].attempts++;
        const isCorrect = showDiff(guess, correct);
        if (isCorrect) {
            unlearnedWords[currentCardIndex].correctCount++;
        }
        cardEl.classList.add('flipped');
        statsEl.textContent = `${unlearnedWords[currentCardIndex].correctCount} / ${unlearnedWords[currentCardIndex].attempts}`;
        answerEl.textContent = guess;
        wordEl.textContent = correct;
    });

    function loadNextCard() {
        if (cardEl.classList.contains('flipped')) {
            cardEl.classList.remove('flipped');
            cardEl.addEventListener('transitionend', () => {
                loadCard();
            }, { once: true });
        } else {
            loadCard();
        }
    }

    guessInput.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
            if (cardEl.classList.contains('flipped')) {
                currentCardIndex = (currentCardIndex + 1) % unlearnedWords.length;
                loadNextCard();
            }
            else {
                document.getElementById('submit').click();
            }
        }
    });

    document.getElementById('flip').addEventListener('click', () => {
        cardEl.classList.toggle('flipped');
    });

    document.getElementById('next').addEventListener('click', () => {
        currentCardIndex = (currentCardIndex + 1) % unlearnedWords.length;
        loadNextCard();
    });

    document.getElementById('prev').addEventListener('click', () => {
        currentCardIndex = (currentCardIndex - 1 + unlearnedWords.length) % unlearnedWords.length;
        loadNextCard();
    });

    loadCard();
</script>

</body>
</html>